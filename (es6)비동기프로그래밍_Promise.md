
## 비동기 프로그래밍 - Promise

- 자바스크립트의 실행 구조
- 기존 방법의 까다로운 점
- 프라미스 소개
- 프라미스 사용해보기
- 프라미스 관련 메소드

## 자바스크립트 실행 구조
자바스크립트 코드는 싱글 스레드로 작동합니다. 브라우저에 접속한 각 웹사이트는 스레드 하나를 메인 스레드로 잡은 채 웹 소스 파일을 내려 받고 파싱, 실행합니다.

메인 스레드에는 한번에 하나씩 비동기 작업을 수행하기 위해 큐를 둡니다. 

이벤트 처리기, 콜백 등을 큐에 쌓을 수 있습니다. AJAX 요청/응답 이벤트 발생, 타이머 등록 등이 일어나면 큐에 새 작업을 추가합니다. 

실행 시간이 오래 걸리는 작업이 섞이면 큐의 다른 작업들과 메인 스크립트를 멈추게 할 수 있습니다.


## 기존 방법이 까다로운 점
ES5는 이벤트와 콜백이라는 두 가지 비동기 코드 작성 패턴을 지원합니다. 
보통 비동기 작업을 시작하고 이벤트 처리기를 등록하거나, 콜백을 전달해서 작업이 끝난 후 실행되도록 코딩합니다.

이벤트를 포함한 비동기 자바스크립트 API는 처리 후 성공/실패에 따른 처리기를 각각 등록합니다.

[예제](https://jsfiddle.net/majestin/4ch5Lma5/)

성공하면 load, 실패하면 error 이벤트 처리기를 각각 호출합니다.

것보기엔 문제가 없어보이지만 여기서 이벤트가 개입된 코드를 작성한다면...

1. 비동기 실행 코드 블록 마다 일일이 이벤트 처리기를 붙여야 한다. try ...catch문 하나로 전체 코드를 감싸지 못하니 예외를 골라내기가 매우 어렵다.
2. 중첩된 함수 호출 탓에 코드를 따라가기 어렵고 읽기 힘들다.
3. 프로그램의 다른 부분에서 특정 비동기 작업이 완료됐는지, 중단됐는지, 아니면 아직 실행 중인지 알려면 해당하는 사용자 변수를 어딘가엔 두어야 한다. 사실 상 비동기 작업의 상태를 파악하기가 쉽지 않다.

[예제](https://jsfiddle.net/majestin/z2phyqot/2/)

콜백을 이용한 비동기 자바스크립트 API는 성공/에러 콜백을 모두 넘기고 성공 여부에 따라 어느 한쪽을 호출한다. 제이쿼리로 AJAX 요청을 할 때는 성공과 실패, 각 경우에 해당하는 콜백도 같이 넘긴다. 

[예제](https://jsfiddle.net/majestin/7cyye515/)

1. try/catch 문을 여러 개 써야하므로 예외를 잡기 어렵다.
2. 중첩된 함수 호출을 따라가야 하므로 가독성이 현저히 떨어진다.
3. 비동기 작업 상태를 유지하기 어렵다. 제이쿼리 AJAX, 또는 다른 비동기 작업이 여러 개 중첩되면 문제는 더욱 복잡해진다.


## 프라미스 소개

## 프라미스 사용해보기 

## 프라미스 관련 메서드 

##QUIZ






### 참고
[ECMAScript 6 길들이기](http://www.yes24.com/24/goods/23904865)

[nhnent github / fe.javascript / promise](https://github.com/nhnent/fe.javascript/wiki/August-31-%E2%80%94-September-4,-2015)

[marocchino github](https://gist.github.com/marocchino/841e2ff62f59f420f9d9)

[toast meetup! - ES6의 제너레이터를 사용한 비동기 프로그래밍](http://meetup.toast.com/posts/73)

[MDN](https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Promise)

